<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Zgadnij kraj po fladze</title>
  <style>
    :root {
      --bg: #f6f8fa;
      --card: #fff;
      --accent: #2b6cb0;
      --ok: #2f855a;
      --bad: #c53030;
    }

    * {
      box-sizing: border-box;
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }

    body {
      margin: 0;
      background: linear-gradient(180deg, #eef2f7, #fff);
      color: #0f172a;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }

    .wrap {
      width: 720px;
      max-width: 96%;
      background: var(--card);
      padding: 28px;
      border-radius: 12px;
      box-shadow: 0 8px 30px rgba(15, 23, 42, 0.08);
    }

    h1 {
      margin: 0 0 10px;
      font-size: 20px;
    }

    .instructions {
      margin: 0 0 18px;
      color: #475569;
    }

    .progress {
      font-weight: 600;
      margin-bottom: 8px;
    }

    .flag {
      font-size: 120px;
      text-align: center;
      padding: 16px;
      background: #f8fafc;
      border-radius: 10px;
      margin-bottom: 16px;
    }

    form {
      display: flex;
      gap: 8px;
    }

    input[type="text"] {
      flex: 1;
      padding: 12px 14px;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      font-size: 16px;
      min-width: 0;
    }

    button {
      background: var(--accent);
      color: #fff;
      border: none;
      padding: 12px 16px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
    }

    button.secondary {
      background: #6b7280;
    }

    #feedback {
      margin-top: 12px;
      height: 20px;
      font-weight: 700;
    }

    #result {
      text-align: center;
      padding: 18px;
      font-size: 18px;
    }

    .hidden {
      display: none;
    }

    .meta {
      margin-top: 12px;
      color: #64748b;
      font-size: 13px;
    }

    /* ResponsywnoÅ›Ä‡ */
    @media (max-width: 720px) {
      .wrap {
        padding: 20px;
        width: 92%;
        border-radius: 10px;
      }

      h1 {
        font-size: 18px;
      }

      .flag {
        font-size: 100px;
      }
    }

    @media (max-width: 480px) {
      body {
        padding: 12px;
      }

      .wrap {
        padding: 16px;
        border-radius: 10px;
      }

      h1 {
        font-size: 17px;
      }

      .instructions {
        font-size: 14px;
      }

      .flag {
        font-size: 84px;
        padding: 12px;
      }

      form {
        flex-direction: column;
      }

      input[type="text"] {
        font-size: 15px;
        padding: 10px 12px;
      }

      button {
        width: 100%;
        padding: 10px;
        margin-top: 6px;
      }

      #result {
        font-size: 16px;
      }

      .meta {
        font-size: 12px;
      }
    }

    @media (max-width: 360px) {
      .flag {
        font-size: 72px;
      }

      h1 {
        font-size: 16px;
      }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Zgadnij kraj po fladze</h1>
    <p class="instructions">PokaÅ¼emy 10 flag kolejno. Wpisz nazwÄ™ kraju (po polsku). Za kaÅ¼dÄ… poprawnÄ… odpowiedÅº otrzymujesz 1 punkt.</p>

    <div id="game">
      <div id="progress" class="progress">Pytanie 1/10</div>
      <div id="flag" class="flag" aria-hidden="true">ðŸ‡µðŸ‡±</div>

      <form id="guessForm">
        <input id="guessInput" type="text" placeholder="Wpisz nazwÄ™ kraju" autocomplete="off" autofocus />
        <button id="submitBtn" type="submit">SprawdÅº</button>
      </form>

      <div id="feedback" aria-live="polite"></div>
      <div class="meta">WciÅ›nij Enter lub kliknij <strong>SprawdÅº</strong>.</div>
    </div>

    <div id="result" class="hidden"></div>
    <div style="text-align:center;margin-top:12px">
      <button id="restartBtn" class="hidden">Zagraj ponownie</button>
    </div>
  </div>

  <script>
    // Lista czÄ™sto znanych krajÃ³w z polskimi nazwami i wariantami
    const countries = [
      {code:'PL',flag:'ðŸ‡µðŸ‡±',names:['Polska']},
      {code:'DE',flag:'ðŸ‡©ðŸ‡ª',names:['Niemcy']},
      {code:'FR',flag:'ðŸ‡«ðŸ‡·',names:['Francja']},
      {code:'ES',flag:'ðŸ‡ªðŸ‡¸',names:['Hiszpania']},
      {code:'IT',flag:'ðŸ‡®ðŸ‡¹',names:['WÅ‚ochy','Wlochy']},
      {code:'GB',flag:'ðŸ‡¬ðŸ‡§',names:['Wielka Brytania','Zjednoczone KrÃ³lestwo','UK']},
      {code:'US',flag:'ðŸ‡ºðŸ‡¸',names:['Stany Zjednoczone','USA','Stany Zjednoczone Ameryki']},
      {code:'BR',flag:'ðŸ‡§ðŸ‡·',names:['Brazylia']},
      {code:'CA',flag:'ðŸ‡¨ðŸ‡¦',names:['Kanada']},
      {code:'JP',flag:'ðŸ‡¯ðŸ‡µ',names:['Japonia']},
      {code:'CN',flag:'ðŸ‡¨ðŸ‡³',names:['Chiny']},
      {code:'RU',flag:'ðŸ‡·ðŸ‡º',names:['Rosja']},
      {code:'IN',flag:'ðŸ‡®ðŸ‡³',names:['Indie']},
      {code:'AU',flag:'ðŸ‡¦ðŸ‡º',names:['Australia']},
      {code:'MX',flag:'ðŸ‡²ðŸ‡½',names:['Meksyk']},
      {code:'ZA',flag:'ðŸ‡¿ðŸ‡¦',names:['Republika PoÅ‚udniowej Afryki','RPA','Poludniowa Afryka']},
      {code:'SE',flag:'ðŸ‡¸ðŸ‡ª',names:['Szwecja']},
      {code:'NL',flag:'ðŸ‡³ðŸ‡±',names:['Holandia','Niderlandy']},
      {code:'AR',flag:'ðŸ‡¦ðŸ‡·',names:['Argentyna']},
      {code:'CH',flag:'ðŸ‡¨ðŸ‡­',names:['Szwajcaria']}
    ];

    const TOTAL = 10;
    let pool = [];
    let current = 0;
    let score = 0;
    let answered = false;

    const flagEl = document.getElementById('flag');
    const progressEl = document.getElementById('progress');
    const feedbackEl = document.getElementById('feedback');
    const form = document.getElementById('guessForm');
    const input = document.getElementById('guessInput');
    const submitBtn = document.getElementById('submitBtn');
    const resultEl = document.getElementById('result');
    const restartBtn = document.getElementById('restartBtn');

    function normalizeText(s){
      return s.trim().toLowerCase().normalize('NFD').replace(/\p{M}/gu,'').replace(/[^a-z0-9\s]/g,'');
    }

    function shuffle(a){
      for(let i=a.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];
      }
      return a;
    }

    function startGame(){
      const copy = countries.slice();
      shuffle(copy);
      pool = copy.slice(0,TOTAL);
      pool.forEach(c=>{ c.norms = c.names.map(n=>normalizeText(n)); c.displayName = c.names[0]; });
      current = 0; score = 0; answered = false;
      resultEl.classList.add('hidden'); restartBtn.classList.add('hidden');
      document.getElementById('game').classList.remove('hidden');
      showQuestion();
    }

    function showQuestion(){
      const c = pool[current];
      progressEl.textContent = `Pytanie ${current+1}/${TOTAL}`;
      flagEl.textContent = c.flag;
      feedbackEl.textContent = '';
      input.value = '';
      input.disabled = false; input.focus();
      submitBtn.textContent = 'SprawdÅº';
      answered = false;
    }

    function showResult(){
      document.getElementById('game').classList.add('hidden');
      resultEl.classList.remove('hidden');
      resultEl.innerHTML = `Koniec! TwÃ³j wynik: <strong>${score}/${TOTAL}</strong>`;
      restartBtn.classList.remove('hidden');
    }

    form.addEventListener('submit', (e)=>{
      e.preventDefault();
      if(!answered){
        const guess = normalizeText(input.value || '');
        const target = pool[current];
        const ok = target.norms.includes(guess);
        if(ok){
          score++;
          feedbackEl.style.color = 'var(--ok)';
          feedbackEl.textContent = 'Poprawna odpowiedÅº!';
          input.disabled = true;
          answered = true;
          // automatycznie przejdÅº do nastÄ™pnego pytania po krÃ³tkiej chwili
          setTimeout(()=>{
            current++;
            if(current>=TOTAL){ showResult(); }
            else{ showQuestion(); }
          }, 900);
        } else {
          feedbackEl.style.color='var(--bad)';
          feedbackEl.textContent = `BÅ‚Ä™dnie. Poprawna odpowiedÅº: ${target.displayName}`;
          input.disabled = true;
          submitBtn.textContent = (current+1===TOTAL)?'Zobacz wynik':'NastÄ™pne';
          answered = true;
        }
      } else {
        current++;
        if(current>=TOTAL){ showResult(); }
        else{ showQuestion(); }
      }
    });

    restartBtn.addEventListener('click', ()=>{ startGame(); });

    // Start immediately
    startGame();
  </script>
</body>
</html>
